(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{WK1S:function(t,e,a){"use strict";a.r(e),a.d(e,"VocationalTestModule",(function(){return d}));var i=a("ofXK"),r=a("tyNb"),n=a("fXoL"),s=a("xRp/"),c=a("yyhP"),o=a("3Pt+");function b(t,e){if(1&t){const t=n.Nb();n.Mb(0,"tr"),n.Mb(1,"div",12),n.Mb(2,"input",13),n.Tb("ngModelChange",(function(e){return n.fc(t),n.Vb(2).$implicit._id=e}))("change",(function(){n.fc(t);const a=e.$implicit,i=n.Vb(2).$implicit;return n.Vb().seleccionar(i,a)})),n.Lb(),n.Mb(3,"label",14),n.mc(4),n.Lb(),n.Kb(5,"br"),n.Lb(),n.Lb()}if(2&t){const t=e.$implicit,a=e.index,i=n.Vb(2),r=i.$implicit,s=i.index;n.yb(2),n.Zb("value",t._id),n.Yb("ngModel",r._id)("name","abc"+s+a),n.yb(2),n.nc(t.rpta)}}function u(t,e){if(1&t&&(n.Mb(0,"tbody"),n.kc(1,b,6,4,"tr",11),n.Lb()),2&t){const t=n.Vb().$implicit;n.yb(1),n.Yb("ngForOf",t.respuestas)}}function p(t,e){if(1&t&&(n.Mb(0,"table",8),n.Mb(1,"thead"),n.Mb(2,"tr"),n.Mb(3,"p",9),n.mc(4),n.Lb(),n.Lb(),n.Lb(),n.kc(5,u,2,1,"tbody",10),n.Kb(6,"hr"),n.Lb()),2&t){const t=e.$implicit,a=e.index,i=n.Vb();n.yb(4),n.pc("",(i.page-1)*i.pageSize+a+1,". ",t.pregunta,""),n.yb(1),n.Yb("ngIf",t.respuestas)}}function l(t,e){if(1&t){const t=n.Nb();n.Mb(0,"button",15),n.Tb("click",(function(){return n.fc(t),n.Vb().siguiente(1)})),n.mc(1,"Siguientes"),n.Lb()}}function g(t,e){if(1&t){const t=n.Nb();n.Mb(0,"button",16),n.Tb("click",(function(){return n.fc(t),n.Vb().finalizar()})),n.mc(1,"Finalizar"),n.Lb()}}const h=[{path:"test-vocacional",component:(()=>{class t{constructor(t,e,a){this.vcService=t,this.activeRouter=e,this.router=a,this.totalPreguntas=0,this.preguntas=[],this.activebtn=!0,this.respuestas=[]||!1,this.activeRouter.queryParamMap.subscribe(t=>{const{page:e}=t.params;this.page=Number(e),this.cargarPreguntas(e)})}ngOnInit(){}cargarPreguntas(t){this.vcService.cargarTests(t).subscribe(t=>{this.preguntas=t.preguntas,this.totalPreguntas=t.total,this.pageSize=t.pageSize,this.totalPreguntas<this.page*this.pageSize&&(this.activebtn=!1)})}seleccionar(t,e){const a={id:t.id,carrera:t.carrera,puntaje:e.puntos};this.respuestas.some((e,a)=>{e.id==t.id&&this.respuestas.splice(a,1)})||this.respuestas.push(a),localStorage.setItem("respuestas",JSON.stringify(this.respuestas))}atras(t){this.activebtn=!0,this.page+=t,this.router.navigate(["/test-vocacional"],{queryParams:{page:this.page}}),this.page<1&&(this.page=1,this.router.navigate(["/test-vocacional"],{queryParams:{page:1}}))}siguiente(t){this.page+=t,this.router.navigate(["/test-vocacional"],{queryParams:{page:this.page}}),(this.page-1)*this.pageSize>=this.totalPreguntas?(this.page-=t,this.router.navigate(["/test-vocacional"],{queryParams:{page:this.page}})):this.totalPreguntas<this.page*this.pageSize&&(this.activebtn=!1)}finalizar(){let t=[];this.respuestas.forEach((function(e){this[e.carrera]||(this[e.carrera]={carrera:e.carrera,puntaje:0},t.push(this[e.carrera])),this[e.carrera].puntaje+=e.puntaje}),Object.create(null));const e={nombres:"Tu carrera Per\xfa",carreras:t};console.log(e),this.vcService.crearResultado(e).subscribe(t=>{console.log(t),this.router.navigate(["tus_datos",t.resultado._id])})}onWindowClose(t){t.preventDefault(),t.returnValue=!1}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(s.a),n.Jb(r.a),n.Jb(r.d))},t.\u0275cmp=n.Db({type:t,selectors:[["app-vocational-test"]],hostBindings:function(t,e){1&t&&n.Tb("beforeunload",(function(t){return e.onWindowClose(t)}),!1,n.ec)},decls:19,vars:7,consts:[[2,"margin-top","8rem"],[3,"max","value"],[1,"text-nowrap"],[1,"wrapper"],["class","table table-borderless",4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-primary btn-lg",3,"click",4,"ngIf"],["class","btn btn-succes",3,"click",4,"ngIf"],[1,"table","table-borderless"],[1,"pregunta__parf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"form-check","position"],["type","radio",1,"radio",3,"value","ngModel","name","ngModelChange","change"],[1,"label"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"btn","btn-succes",3,"click"]],template:function(t,e){1&t&&(n.Mb(0,"div",0),n.Mb(1,"h2"),n.mc(2,"Test de orientaci\xf3n vocacional"),n.Lb(),n.Kb(3,"hr"),n.Mb(4,"progressbar",1),n.Mb(5,"span",2),n.mc(6),n.Lb(),n.Lb(),n.Kb(7,"br"),n.Mb(8,"div",3),n.kc(9,p,7,3,"table",4),n.Lb(),n.Mb(10,"div"),n.Mb(11,"button",5),n.Tb("click",(function(){return e.atras(-1)})),n.mc(12,"Anteriores"),n.Lb(),n.mc(13," \xa0 "),n.kc(14,l,2,0,"button",6),n.kc(15,g,2,0,"button",7),n.Lb(),n.Kb(16,"br"),n.Kb(17,"br"),n.Kb(18,"br"),n.Lb()),2&t&&(n.yb(4),n.Yb("max",e.totalPreguntas)("value",e.pageSize*e.page),n.yb(2),n.pc("",e.pageSize*e.page," / ",e.totalPreguntas,""),n.yb(3),n.Yb("ngForOf",e.preguntas),n.yb(5),n.Yb("ngIf",e.activebtn),n.yb(1),n.Yb("ngIf",!e.activebtn))},directives:[c.a,i.i,i.j,o.l,o.a,o.f,o.h],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(30em,10fr))}.pregunta__parf[_ngcontent-%COMP%]{color:#000;font-size:large}"]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(e){return new(e||t)},imports:[[r.g.forChild(h)],r.g]}),t})(),d=(()=>{class t{}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(e){return new(e||t)},imports:[[i.b,f,c.b,o.e]]}),t})()}}]);