exports.ids=[3],exports.modules={GCp2:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AdminModule",(function(){return AdminModule}));var common=__webpack_require__("ofXK"),router=__webpack_require__("tyNb"),fesm2015_forms=__webpack_require__("3Pt+"),free_solid_svg_icons=__webpack_require__("YTkO"),core=__webpack_require__("fXoL"),ngx_bootstrap_modal=__webpack_require__("K3ix"),vocational_test_service=__webpack_require__("xRp/"),angular_fontawesome=__webpack_require__("6NWb"),ngx_bootstrap_tooltip=__webpack_require__("Mfq2");const _c0=["template"],_c1=["templatechild"];function PreguntasComponent_div_6_Template(rf,ctx){1&rf&&(core.Lc(0,"div",10),core.Lc(1,"h1",11),core.Jc(2,"i",12),core.Kc(),core.Kc())}const _c2=function(){return["fas","times"]};function PreguntasComponent_tr_19_tr_9_Template(rf,ctx){if(1&rf){const _r11=core.Mc();core.Lc(0,"tr"),core.Lc(1,"td"),core.Lc(2,"a",13),core.Sc("click",(function PreguntasComponent_tr_19_tr_9_Template_a_click_2_listener(){core.ed(_r11);const r_r8=ctx.$implicit,p_r6=core.Uc().$implicit;return core.Uc().openChildModal(p_r6,r_r8)})),core.ld(3),core.Kc(),core.Kc(),core.Lc(4,"td"),core.Lc(5,"a",14),core.Sc("click",(function PreguntasComponent_tr_19_tr_9_Template_a_click_5_listener(){core.ed(_r11);const r_r8=ctx.$implicit,p_r6=core.Uc().$implicit;return core.Uc().borrarRespuesta(p_r6,r_r8)})),core.Jc(6,"fa-icon",15),core.Kc(),core.Kc(),core.Lc(7,"td"),core.ld(8),core.Kc(),core.Kc()}if(2&rf){const r_r8=ctx.$implicit;core.xc(3),core.md(r_r8.rpta),core.xc(3),core.Xc("icon",core.Zc(3,_c2)),core.xc(2),core.md(r_r8.puntos)}}function PreguntasComponent_tr_19_Template(rf,ctx){if(1&rf){const _r15=core.Mc();core.Lc(0,"tr"),core.Lc(1,"td"),core.Lc(2,"a",13),core.Sc("click",(function PreguntasComponent_tr_19_Template_a_click_2_listener(){core.ed(_r15);const p_r6=ctx.$implicit;return core.Uc().openModal(p_r6)})),core.ld(3),core.Kc(),core.Lc(4,"a",14),core.Sc("click",(function PreguntasComponent_tr_19_Template_a_click_4_listener(){core.ed(_r15);const p_r6=ctx.$implicit;return core.Uc().borrarPregunta(p_r6)})),core.Jc(5,"fa-icon",15),core.Kc(),core.Kc(),core.Lc(6,"td",16),core.Lc(7,"table",17),core.Lc(8,"tbody"),core.jd(9,PreguntasComponent_tr_19_tr_9_Template,9,4,"tr",7),core.Kc(),core.Kc(),core.Lc(10,"button",18),core.Sc("click",(function PreguntasComponent_tr_19_Template_button_click_10_listener(){core.ed(_r15);const p_r6=ctx.$implicit;return core.Uc().openChildModal(p_r6)})),core.Jc(11,"i",19),core.ld(12," Nueva respuesta"),core.Kc(),core.Kc(),core.Kc()}if(2&rf){const p_r6=ctx.$implicit;core.xc(3),core.nd("",p_r6.pregunta," "),core.xc(2),core.Xc("icon",core.Zc(3,_c2)),core.xc(4),core.Xc("ngForOf",p_r6.respuestas)}}function PreguntasComponent_ng_template_20_div_10_div_1_Template(rf,ctx){1&rf&&(core.Lc(0,"div"),core.ld(1,"Pregunta es requerido"),core.Kc())}function PreguntasComponent_ng_template_20_div_10_Template(rf,ctx){if(1&rf&&(core.Lc(0,"div",35),core.jd(1,PreguntasComponent_ng_template_20_div_10_div_1_Template,2,0,"div",36),core.Kc()),2&rf){const ctx_r18=core.Uc(2);core.xc(1),core.Xc("ngIf",ctx_r18.f.pregunta.errors.required)}}function PreguntasComponent_ng_template_20_option_17_Template(rf,ctx){if(1&rf&&(core.Lc(0,"option",37),core.ld(1),core.Kc()),2&rf){const c_r21=ctx.$implicit;core.Xc("value",c_r21._id),core.xc(1),core.md(c_r21.nombre)}}const _c3=function(a0){return{"is-invalid":a0}};function PreguntasComponent_ng_template_20_Template(rf,ctx){if(1&rf){const _r23=core.Mc();core.Lc(0,"div",20),core.Lc(1,"h4",21),core.ld(2,"Usuario"),core.Kc(),core.Lc(3,"button",22),core.Sc("click",(function PreguntasComponent_ng_template_20_Template_button_click_3_listener(){core.ed(_r23);return core.Uc().cancelar()})),core.Lc(4,"span",23),core.ld(5,"\xd7"),core.Kc(),core.Kc(),core.Kc(),core.Lc(6,"div",24),core.Lc(7,"form",25),core.Sc("ngSubmit",(function PreguntasComponent_ng_template_20_Template_form_ngSubmit_7_listener(){core.ed(_r23);return core.Uc().crearPregunta()})),core.Lc(8,"div",26),core.Jc(9,"input",27),core.jd(10,PreguntasComponent_ng_template_20_div_10_Template,2,1,"div",28),core.Kc(),core.Lc(11,"div",26),core.Lc(12,"label",29),core.ld(13,"Carrera profesional"),core.Kc(),core.Lc(14,"select",30),core.Lc(15,"option",31),core.ld(16,"Selecciona una carrera"),core.Kc(),core.jd(17,PreguntasComponent_ng_template_20_option_17_Template,2,2,"option",32),core.Kc(),core.Kc(),core.Lc(18,"button",33),core.ld(19,"Enviar"),core.Kc(),core.Lc(20,"button",34),core.Sc("click",(function PreguntasComponent_ng_template_20_Template_button_click_20_listener(){core.ed(_r23);return core.Uc().cancelar()})),core.ld(21,"Cancelar"),core.Kc(),core.Kc(),core.Kc()}if(2&rf){const ctx_r3=core.Uc();core.xc(7),core.Xc("formGroup",ctx_r3.preguntaForm),core.xc(2),core.Xc("ngClass",core.ad(5,_c3,ctx_r3.f.pregunta.touched&&ctx_r3.f.pregunta.errors)),core.xc(1),core.Xc("ngIf",ctx_r3.f.pregunta.touched&&ctx_r3.f.pregunta.errors),core.xc(7),core.Xc("ngForOf",ctx_r3.carreras),core.xc(1),core.Xc("disabled",ctx_r3.preguntaForm.invalid)}}function PreguntasComponent_ng_template_22_Template(rf,ctx){if(1&rf){const _r27=core.Mc();core.Lc(0,"div",20),core.Lc(1,"h4",21),core.ld(2,"Usuario"),core.Kc(),core.Lc(3,"button",22),core.Sc("click",(function PreguntasComponent_ng_template_22_Template_button_click_3_listener(){core.ed(_r27);return core.Uc().cancelar()})),core.Lc(4,"span",23),core.ld(5,"\xd7"),core.Kc(),core.Kc(),core.Kc(),core.Lc(6,"div",24),core.Lc(7,"form",25),core.Sc("ngSubmit",(function PreguntasComponent_ng_template_22_Template_form_ngSubmit_7_listener(){core.ed(_r27);return core.Uc().crearRespuesta()})),core.Lc(8,"div",26),core.Jc(9,"input",38),core.Kc(),core.Lc(10,"div",26),core.Jc(11,"input",39),core.Kc(),core.Lc(12,"button",33),core.ld(13,"Enviar"),core.Kc(),core.Lc(14,"button",34),core.Sc("click",(function PreguntasComponent_ng_template_22_Template_button_click_14_listener(){core.ed(_r27);return core.Uc().cancelar()})),core.ld(15,"Cancelar"),core.Kc(),core.Kc(),core.Kc()}if(2&rf){const ctx_r5=core.Uc();core.xc(7),core.Xc("formGroup",ctx_r5.respuestaForm),core.xc(5),core.Xc("disabled",ctx_r5.respuestaForm.invalid)}}class preguntas_component_PreguntasComponent{constructor(fb,modalService,vcService,library){this.fb=fb,this.modalService=modalService,this.vcService=vcService,this.library=library,this.preguntas=[],this.carreras=[],this.config={class:"modal-md"},this.library.addIcons(free_solid_svg_icons.faTimes),this.preguntaForm=this.fb.group({pregunta:["",fesm2015_forms.o.required],carrera:["",fesm2015_forms.o.required],id:[""]}),this.respuestaForm=this.fb.group({rpta:[""],puntos:[""],_id:[""]})}ngOnInit(){this.cargarPreguntas(),this.cargarCarreras()}get f(){return this.preguntaForm.controls}showPreview(event){const file=event.target.files[0];this.preguntaForm.patchValue({img:file}),this.preguntaForm.get("img").updateValueAndValidity();const reader=new FileReader;reader.onload=()=>{this.imageURL=reader.result},reader.readAsDataURL(file)}openModal(pregunta){console.log(pregunta),pregunta?this.preguntaForm.patchValue(pregunta):this.preguntaForm.reset(),this.modalRef=this.modalService.show(this.template,this.config)}cargarPreguntas(){this.vcService.cargarPreguntas().subscribe(resp=>{this.preguntas=resp.preguntas,console.log(resp)})}crearPregunta(){console.log(this.preguntaForm.value),this.preguntaForm.value.id?(console.log("Actualizando"),this.vcService.actualizarPregunta(this.preguntaForm.value).subscribe(resp=>{console.log(resp),!0===resp.ok&&(this.cargarPreguntas(),this.modalRef.hide())})):(console.log("creando"),console.log(this.preguntaForm.value),this.vcService.crearPregunta(this.preguntaForm.value).subscribe(resp=>{console.log(resp),!0===resp.ok&&(this.cargarPreguntas(),this.modalRef.hide())}))}borrarPregunta(pregunta){console.log(pregunta),this.vcService.borrarPregunta(pregunta.id).subscribe(resp=>{console.log(resp),this.cargarPreguntas()})}openChildModal(pregunta,respuesta){this.pid=pregunta.id,console.log(this.pid),respuesta?this.respuestaForm.patchValue(respuesta):this.respuestaForm.reset(),this.modalRef=this.modalService.show(this.templatechild,this.config)}crearRespuesta(){console.log(this.id,this.respuestaForm.value);const respuesta=Object.assign({pid:this.pid},this.respuestaForm.value);this.respuestaForm.value._id?(console.log("Actualizando"),this.vcService.actualizarRespuesta(respuesta).subscribe(resp=>{console.log(resp),!0===resp.ok&&(this.cargarPreguntas(),this.modalRef.hide())})):(console.log("creando nuevo"),this.vcService.crearRespuesta(this.pid,this.respuestaForm.value).subscribe(resp=>{console.log(resp),!0===resp.ok&&(this.cargarPreguntas(),this.modalRef.hide())}))}cancelar(){this.modalRef.hide()}borrarRespuesta(pregunta,respuesta){console.log(pregunta),console.log(respuesta),this.vcService.borrarRespuesta(pregunta.id,respuesta._id).subscribe(resp=>{console.log(resp),this.cargarPreguntas()})}cargarCarreras(){this.vcService.cargarCarreras().subscribe(resp=>{console.log("gaaaaaaaaaaaaa",resp),this.carreras=resp.carreras})}}preguntas_component_PreguntasComponent.\u0275fac=function PreguntasComponent_Factory(t){return new(t||preguntas_component_PreguntasComponent)(core.Ic(fesm2015_forms.b),core.Ic(ngx_bootstrap_modal.a),core.Ic(vocational_test_service.a),core.Ic(angular_fontawesome.b))},preguntas_component_PreguntasComponent.\u0275cmp=core.Cc({type:preguntas_component_PreguntasComponent,selectors:[["app-preguntas"]],viewQuery:function PreguntasComponent_Query(rf,ctx){var _t;(1&rf&&(core.pd(_c0,!0),core.pd(_c1,!0)),2&rf)&&(core.bd(_t=core.Tc())&&(ctx.template=_t.first),core.bd(_t=core.Tc())&&(ctx.templatechild=_t.first))},decls:24,vars:2,consts:[[2,"margin-top","7rem"],[1,"text-muted"],["class","m-auto",4,"ngIf"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],[1,"mt-3"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["template",""],["templatechild",""],[1,"m-auto"],[1,"text-center","display-3","mt-5"],[1,"fa","fa-spinner","fa-spin"],["tooltip","Editar",1,"btn-link","text-dark",2,"cursor","pointer",3,"click"],["tooltip","Eliminar",1,"btn","btn-link",3,"click"],[1,"text-danger",3,"icon"],[1,"p-0",2,"min-width","25rem"],[1,"table","m-0"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-plus"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","pregunta","type","text","placeholder","Pregunta",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","exampleFormControlSelect1"],["formControlName","carrera","id","exampleFormControlSelect1",1,"form-control"],["default",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["formControlName","rpta","type","text","placeholder","Respuesta",1,"form-control"],["formControlName","puntos","type","number","placeholder","Puntos",1,"form-control"]],template:function PreguntasComponent_Template(rf,ctx){1&rf&&(core.Lc(0,"div",0),core.Lc(1,"h1"),core.ld(2,"Preguntas | "),core.Lc(3,"small",1),core.ld(4,"Administraci\xf3n de preguntas"),core.Kc(),core.Kc(),core.Kc(),core.Jc(5,"hr"),core.jd(6,PreguntasComponent_div_6_Template,3,0,"div",2),core.Lc(7,"div",3),core.Lc(8,"button",4),core.Sc("click",(function PreguntasComponent_Template_button_click_8_listener(){return ctx.openModal()})),core.ld(9,"Registrar nueva pregunta"),core.Kc(),core.Kc(),core.Lc(10,"div",5),core.Lc(11,"table",6),core.Lc(12,"thead"),core.Lc(13,"tr"),core.Lc(14,"th"),core.ld(15,"Preguntas"),core.Kc(),core.Lc(16,"th"),core.ld(17,"Respuestas"),core.Kc(),core.Kc(),core.Kc(),core.Lc(18,"tbody"),core.jd(19,PreguntasComponent_tr_19_Template,13,4,"tr",7),core.Kc(),core.Kc(),core.Kc(),core.jd(20,PreguntasComponent_ng_template_20_Template,22,7,"ng-template",null,8,core.kd),core.jd(22,PreguntasComponent_ng_template_22_Template,16,2,"ng-template",null,9,core.kd)),2&rf&&(core.xc(6),core.Xc("ngIf",!ctx.preguntas),core.xc(13),core.Xc("ngForOf",ctx.preguntas))},directives:[common.j,common.i,ngx_bootstrap_tooltip.a,angular_fontawesome.a,fesm2015_forms.q,fesm2015_forms.g,fesm2015_forms.d,fesm2015_forms.a,fesm2015_forms.f,fesm2015_forms.c,common.h,fesm2015_forms.n,fesm2015_forms.i,fesm2015_forms.p,fesm2015_forms.j],styles:[""]});const routes=[{path:"preguntas",component:preguntas_component_PreguntasComponent}];class AdminRoutingModule{}AdminRoutingModule.\u0275mod=core.Gc({type:AdminRoutingModule}),AdminRoutingModule.\u0275inj=core.Fc({factory:function AdminRoutingModule_Factory(t){return new(t||AdminRoutingModule)},imports:[[router.f.forChild(routes)],router.f]});class AdminModule{}AdminModule.\u0275mod=core.Gc({type:AdminModule}),AdminModule.\u0275inj=core.Fc({factory:function AdminModule_Factory(t){return new(t||AdminModule)},imports:[[common.b,AdminRoutingModule,ngx_bootstrap_modal.b.forRoot(),fesm2015_forms.m,angular_fontawesome.c,ngx_bootstrap_tooltip.b.forRoot()]]})},"xRp/":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VocationalTestService}));var _environments_environment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("AytR"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fXoL"),_angular_common_http__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("tk/3");const base_url=_environments_environment__WEBPACK_IMPORTED_MODULE_0__.a.base_url;class VocationalTestService{constructor(http){this.http=http}crearParticipante(participante){return this.http.post(base_url+"/usuarios",participante)}cargarPreguntas(){return this.http.get(base_url+"/preguntas")}cargarTests(desde=0){return this.http.get(`${base_url}/preguntas/tests?desde=${desde}`)}crearPregunta(pregunta){return this.http.post(base_url+"/preguntas",pregunta)}actualizarPregunta(pregunta){return this.http.put(`${base_url}/preguntas/${pregunta.id}`,pregunta)}borrarPregunta(id){return this.http.delete(`${base_url}/preguntas/${id}`)}crearRespuesta(id,respuesta){return this.http.put(`${base_url}/preguntas/respuesta/${id}`,respuesta)}actualizarRespuesta(respuesta){return this.http.put(`${base_url}/preguntas/respuesta/${respuesta.pid}/${respuesta._id}`,respuesta)}borrarRespuesta(pid,rid){return this.http.delete(`${base_url}/preguntas/respuesta/${pid}/${rid}`)}cargarCarreras(){return this.http.get(base_url+"/carreras")}}VocationalTestService.\u0275fac=function VocationalTestService_Factory(t){return new(t||VocationalTestService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Pc(_angular_common_http__WEBPACK_IMPORTED_MODULE_2__.b))},VocationalTestService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ec({token:VocationalTestService,factory:VocationalTestService.\u0275fac,providedIn:"root"})}};